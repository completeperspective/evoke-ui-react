/**
 * Button Component Styles - Minimal SCSS for CVA Enhancement
 * Only includes styles that CVA cannot handle effectively
 */
@use '../../styles/abstracts' as *;

.button {
  // Ensure text doesn't get selected during interaction
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  // Enhanced accessibility for focus states
  @include enhanced-focus-ring;
  
  // Reduced motion preferences
  @media (prefers-reduced-motion: reduce) {
    transition: none !important;
    animation: none !important;
    
    &:hover {
      transform: none !important;
    }
    
    * {
      animation: none !important;
    }
  }
  
  // High contrast mode enhancements
  @media (prefers-contrast: high) {
    border-width: 2px !important;
    font-weight: 600 !important;
    
    &:focus-visible {
      outline: 3px solid !important;
      outline-offset: 3px !important;
    }
    
    &:disabled {
      opacity: 0.6 !important;
      text-decoration: line-through;
    }
  }
  
  // Print styles for accessibility
  @media print {
    background: transparent !important;
    color: black !important;
    border: 1px solid black !important;
    box-shadow: none !important;
    transform: none !important;
    
    &::before,
    &::after {
      display: none !important;
    }
  }
  
  // Touch device optimizations
  @media (hover: none) and (pointer: coarse) {
    // Increase touch target size on mobile
    min-height: 44px;
    min-width: 44px;
    
    // Remove hover effects on touch devices
    &:hover {
      transform: none !important;
    }
  }
}

// Loading spinner enhancement for better browser support
@supports not (animation: spin 1s linear infinite) {
  .button [class*="animate-spin"] {
    // Fallback for browsers without animation support
    opacity: 0.7;
    
    &::after {
      content: '...';
      animation: ellipsis 1.5s steps(4, end) infinite;
    }
  }
  
  @keyframes ellipsis {
    0% { content: '.'; }
    25% { content: '..'; }
    50% { content: '...'; }
    75% { content: '..'; }
    100% { content: '.'; }
  }
}