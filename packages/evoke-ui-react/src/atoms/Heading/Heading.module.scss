/**
 * Heading Component Styles
 * Minimal SCSS overrides for accessibility, responsive behavior, and media queries
 */
@use '../../styles/abstracts' as *;

.heading {
  @include component-base;
  
  // Remove default margins that can cause layout issues
  margin: 0;
  
  // Enhanced selection styling
  &::selection {
    background-color: oklch(var(--ui-color-primary) / 0.2);
    color: oklch(var(--ui-color-primary-foreground));
  }
  
  &::-moz-selection {
    background-color: oklch(var(--ui-color-primary) / 0.2);
    color: oklch(var(--ui-color-primary-foreground));
  }
  
  // Link styling within headings - enhanced accessibility
  a {
    color: inherit;
    text-decoration: none;
    transition: all var(--ui-duration-fast) var(--ui-easing-out);
    border-radius: var(--ui-radius-xs);
    
    &:hover {
      color: oklch(var(--ui-color-primary));
      text-decoration: underline;
      text-decoration-color: oklch(var(--ui-color-primary) / 0.6);
      text-underline-offset: 0.125em;
    }
    
    &:focus {
      outline: 2px solid oklch(var(--ui-color-ring));
      outline-offset: 2px;
      border-radius: var(--ui-radius-sm);
    }
  }
  
  // Prevent orphans and widows in headings
  orphans: 2;
  widows: 2;
}

// Utility classes for enhanced functionality
.focusable {
  // Ensure focusable headings are interactive
  cursor: pointer;
  
  @include enhanced-focus-ring;
  
  // Enhanced focus states
  &:focus {
    outline: 2px solid oklch(var(--ui-color-ring));
    outline-offset: 2px;
  }
}

.balance {
  text-wrap: balance;
  
  // Ensure balanced text works well with responsive design
  @supports not (text-wrap: balance) {
    hyphens: auto;
    word-break: break-word;
  }
}

// Level-specific enhancements that CVA cannot handle
.heading {
  // Progressive spacing for natural document flow
  &:is(h3) {
    &:not(:first-child) {
      margin-top: 1.5rem;
    }
  }
  
  &:is(h4) {
    &:not(:first-child) {
      margin-top: 1.25rem;
    }
  }
  
  &:is(h5, h6) {
    &:not(:first-child) {
      margin-top: 1rem;
    }
  }
}

// Dark theme adjustments for better readability
@include dark {
  .heading {
    // Subtle text shadow for better contrast in dark mode
    text-shadow: 0 0 1px oklch(var(--ui-color-background) / 0.5);
  }
}

// High contrast mode support
@include high-contrast {
  .heading {
    a {
      text-decoration: underline !important;
      text-decoration-thickness: 2px !important;
      font-weight: 600;
    }
    
    &.focusable:focus {
      outline: 3px solid !important;
      outline-offset: 3px !important;
    }
  }
}

// Print styles
@media print {
  .heading {
    color: black !important;
    background: transparent !important;
    text-shadow: none !important;
    page-break-after: avoid;
    
    &:is(h1, h2, h3) {
      page-break-inside: avoid;
    }
    
    a {
      color: black !important;
      text-decoration: underline !important;
    }
  }
}

// Reduced motion preferences
@include reduced-motion {
  .heading {
    transition: none !important;
    
    a {
      transition: none !important;
    }
  }
}

// Container query support for advanced fluid typography
@container (min-width: 320px) and (max-width: 768px) {
  .heading {
    // Ensure headings remain readable on small screens
    &:is(h1) {
      line-height: 1.1;
    }
  }
}