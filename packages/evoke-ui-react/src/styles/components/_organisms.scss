/**
 * Organism Component Styles
 * Complex patterns with accessibility and reduced motion support
 * Minimal SCSS for features CVA cannot handle
 */

/* Modal System */
.evoke-modal-overlay {
  // Enhanced backdrop for better visual separation
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  
  @media (prefers-reduced-motion: reduce) {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

.evoke-modal-content {
  // Enhanced focus ring for accessibility
  &:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }
  
  // Improved animation performance
  transform-origin: center;
  will-change: transform, opacity;
  
  @media (prefers-reduced-motion: reduce) {
    animation: none !important;
    transition: none !important;
    transform: none !important;
  }
}

.evoke-modal-close {
  // Enhanced close button accessibility
  &:focus-visible {
    ring-offset-width: 2px;
  }
  
  // Smooth hover transitions
  transition: opacity 150ms ease-in-out;
  
  @media (prefers-reduced-motion: reduce) {
    transition: none !important;
  }
}

/* Dialog System */
.evoke-dialog {
  // Improved container styling
  container-type: inline-size;
  
  @container (max-width: 480px) {
    .evoke-dialog-actions {
      flex-direction: column-reverse;
      gap: 0.5rem;
    }
  }
}

.evoke-dialog-actions {
  // Enhanced button spacing
  & > * + * {
    margin-left: 0.5rem;
  }
  
  @media (max-width: 640px) {
    flex-direction: column-reverse;
    
    & > * + * {
      margin-left: 0;
      margin-bottom: 0.5rem;
    }
  }
}

/* AlertDialog System */
.evoke-alert-dialog {
  // Intent-based styling enhancements
  &.border-destructive-50 {
    box-shadow: 0 0 0 1px hsl(var(--destructive) / 0.2);
  }
  
  &.border-warning-50 {
    box-shadow: 0 0 0 1px hsl(var(--warning) / 0.2);
  }
  
  &.border-success-50 {
    box-shadow: 0 0 0 1px hsl(var(--success) / 0.2);
  }
}

.evoke-alert-dialog-overlay {
  // Stronger backdrop for alert dialogs
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  
  @media (prefers-reduced-motion: reduce) {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
}

.evoke-alert-dialog-action,
.evoke-alert-dialog-cancel {
  // Enhanced button interactions
  transition: all 150ms ease-in-out;
  
  @media (prefers-reduced-motion: reduce) {
    transition: none !important;
  }
}

/* Drawer System */
.evoke-drawer-content {
  // Enhanced slide animations
  will-change: transform;
  
  // Touch-friendly interaction on mobile
  @media (hover: none) and (pointer: coarse) {
    // Add touch indicators or enhanced tap targets
  }
  
  // Improved keyboard navigation
  &:focus-within {
    outline: 1px solid hsl(var(--ring) / 0.5);
    outline-offset: -1px;
  }
}

/* Sheet System */
.evoke-sheet-content {
  // Enhanced backdrop blur for ghost variant
  &.supports-backdrop-filter-bg-background-60 {
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    
    @media (prefers-reduced-motion: reduce) {
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
      background: hsl(var(--background));
    }
  }
}

.evoke-sheet-inner {
  // Smooth scrolling for sheet content
  scroll-behavior: smooth;
  
  @media (prefers-reduced-motion: reduce) {
    scroll-behavior: auto;
  }
}

.evoke-sheet-footer {
  // Sticky footer styling enhancements
  &.sticky {
    z-index: 10;
    box-shadow: 0 -1px 3px hsl(var(--border) / 0.1);
    
    // Enhanced backdrop for sticky footer
    &.supports-backdrop-filter-bg-background-60 {
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      
      @media (prefers-reduced-motion: reduce) {
        backdrop-filter: none;
        -webkit-backdrop-filter: none;
      }
    }
  }
}

/* Animation Keyframes */
@keyframes modal-overlay-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes modal-overlay-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

@keyframes modal-content-in {
  from {
    opacity: 0;
    transform: translate(-50%, -48%) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

@keyframes modal-content-out {
  from {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  to {
    opacity: 0;
    transform: translate(-50%, -48%) scale(0.95);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .evoke-modal-overlay,
  .evoke-alert-dialog-overlay {
    background-color: rgba(0, 0, 0, 0.9);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
  }
  
  .evoke-modal-content,
  .evoke-alert-dialog-content,
  .evoke-drawer-content,
  .evoke-sheet-content {
    border: 2px solid;
    box-shadow: none;
  }
}

/* Print styles */
@media print {
  .evoke-modal-overlay,
  .evoke-alert-dialog-overlay,
  .evoke-drawer-content,
  .evoke-sheet-content {
    display: none !important;
  }
}