<!-- 
  Storybook Preview Head - GitHub Pages Optimized
  
  This file contains optimized head content for GitHub Pages deployment
  with performance, SEO, and accessibility enhancements.
-->

<!-- Performance and SEO Meta Tags -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="Evoke UI React Component Library - Production-ready, themable components built on shadcn/ui with OKLCH color space and runtime theming" />
<meta name="keywords" content="react, component-library, design-system, tailwindcss, storybook, evoke-ui, oklch, theming, shadcn" />

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Evoke UI - React Component Library" />
<meta property="og:description" content="Production-ready, themable React components with OKLCH color space and runtime theming" />
<meta property="og:site_name" content="Evoke UI" />

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Evoke UI - React Component Library" />
<meta name="twitter:description" content="Production-ready React component library with OKLCH theming" />

<!-- Performance Optimization -->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link rel="dns-prefetch" href="//fonts.gstatic.com" />

<!-- Critical CSS Inlining (Development Mode) -->
<style>
  /* Critical above-the-fold styles for faster loading */
  body {
    margin: 0;
    padding: 0;
    font-family: system-ui, -apple-system, "Segoe UI", "Roboto", "Helvetica Neue", Arial, sans-serif;
    line-height: 1.5;
    color: rgb(15 23 42);
    background-color: rgb(255 255 255);
  }
  
  /* Loading state styles */
  .sb-show-preparing-story .sb-previewblock {
    background: linear-gradient(90deg, #f1f5f9 0%, #e2e8f0 50%, #f1f5f9 100%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }
  
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  
  /* Reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    .sb-show-preparing-story .sb-previewblock {
      animation: none;
      background: #f1f5f9;
    }
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    body {
      color: #000000;
      background-color: #ffffff;
    }
    
    .sb-show-preparing-story .sb-previewblock {
      background: #e5e7eb;
      border: 2px solid #000000;
    }
  }
  
  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    body {
      color: rgb(248 250 252);
      background-color: rgb(15 23 42);
    }
    
    .sb-show-preparing-story .sb-previewblock {
      background: linear-gradient(90deg, #1e293b 0%, #334155 50%, #1e293b 100%);
    }
  }
</style>

<!-- Google Fonts - Optimized Loading -->
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Lobster:wght@400&family=Inter:wght@400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lobster:wght@400&family=Inter:wght@400;500;600;700&display=swap">
</noscript>

<!-- Theme color for browser UI -->
<meta name="theme-color" content="#d946ef" media="(prefers-color-scheme: light)" />
<meta name="theme-color" content="#a21caf" media="(prefers-color-scheme: dark)" />

<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="icon" type="image/png" href="/favicon.png" />

<!-- Performance monitoring for production -->
<script>
  // Initialize performance monitoring
  if (typeof window !== 'undefined') {
    window.__STORYBOOK_PERFORMANCE__ = {
      startTime: Date.now(),
      metrics: {},
      
      // Track Core Web Vitals
      trackWebVital: function(name, value) {
        this.metrics[name] = value;
        console.log('ðŸ“Š ' + name + ':', value);
      },
      
      // Track custom metrics
      trackMetric: function(name, value) {
        this.metrics[name] = value;
        if (process.env.NODE_ENV === 'development') {
          console.log('âš¡ ' + name + ':', value);
        }
      }
    };
    
    // Track page load time
    window.addEventListener('load', function() {
      const loadTime = Date.now() - window.__STORYBOOK_PERFORMANCE__.startTime;
      window.__STORYBOOK_PERFORMANCE__.trackMetric('pageLoadTime', loadTime);
    });
    
    // Track first paint and contentful paint
    if ('performance' in window && 'getEntriesByType' in window.performance) {
      const observer = new PerformanceObserver(function(list) {
        for (const entry of list.getEntries()) {
          if (entry.entryType === 'paint') {
            window.__STORYBOOK_PERFORMANCE__.trackMetric(entry.name, entry.startTime);
          }
        }
      });
      
      try {
        observer.observe({ entryTypes: ['paint'] });
      } catch (e) {
        // Performance Observer not supported
      }
    }
  }
</script>

<!-- Error boundary for better debugging -->
<script>
  window.addEventListener('error', function(event) {
    console.error('ðŸš¨ Global Error:', event.error);
    
    // Track error metrics
    if (window.__STORYBOOK_PERFORMANCE__) {
      window.__STORYBOOK_PERFORMANCE__.trackMetric('errorCount', 
        (window.__STORYBOOK_PERFORMANCE__.metrics.errorCount || 0) + 1
      );
    }
  });
  
  window.addEventListener('unhandledrejection', function(event) {
    console.error('ðŸš¨ Unhandled Promise Rejection:', event.reason);
    
    // Track promise rejection metrics
    if (window.__STORYBOOK_PERFORMANCE__) {
      window.__STORYBOOK_PERFORMANCE__.trackMetric('promiseRejectionCount', 
        (window.__STORYBOOK_PERFORMANCE__.metrics.promiseRejectionCount || 0) + 1
      );
    }
  });
</script>